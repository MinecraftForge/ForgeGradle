apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'eclipse'
apply plugin: 'groovy'

group = 'net.minecraftforge.gradle'
version = '0.1'
archivesBaseName = 'FMLCustom'
targetCompatibility = '1.6'
sourceCompatibility = '1.6'

repositories
{
    mavenCentral()
    flatDir {
        dirs 'lib'
    }
}

jar
{
    // packs a bunch of stuff into my jar.
    // everything marked as packed
    from {
        configurations.packed.collect {
            it.isDirectory() ? it : zipTree(it).matching {
                exclude "META-INF", "META-INF/**", "*META-INF*", "meta-inf"
                exclude "**.jar", "**/*.jar", "*.jar"
            }
        }
    }
    
    manifest {
        attributes 'version':project.version, 'javaCompliance': project.targetCompatibility
        attributes 'group':project.group
    }
}

configurations
{
    packed
    compile.extendsFrom packed
}

dependencies
{
    compile gradleApi()
    compile localGroovy()

    compile 'net.sourceforge.argo:argo:3.4' // json stuff? perhaps replace with json slurper and stuff?
    compile 'net.sf.opencsv:opencsv:2.3' // reading CSVs.. also used by SpecialSource
    compile 'net.md-5:SpecialSource:1.5' // this is needed...
    compile 'com.cloudbees:diff4j:1.1' // for difing and patching
//    compile 'com.github.abrarsyed.jastyle:jAstyle:1.1' // formatting
    compile 'org.ow2.asm:asm-debug-all:4.1' // Debug version, so we can have generics!

    compile 'com.github.jponge:lzma-java:1.3' // replaces the LZMA binary
    compile 'com.nothome:javaxdelta:2.0.1' // GDIFF implementation for BinPatches
    compile 'org.apache.shiro:shiro-all:1.2.2' // Ant style patern matching
    compile 'com.google.code.gson:gson:2.2.4' // Used instead of Argo for buuilding changelog.
    
    // just for the extension object
    //compile "edu.sc.seis.gradle:launch4j:latest.integration"

    // 1.6 JAstyle
    compile name: 'jAstyle', version: '1.2' // Formatting

    // Named regexp. 1.6
    compile 'com.github.tony19:named-regexp:0.2.3' // 1.7 regexp behaviour.

}

artifacts {
    archives jar
}